package fr.acinq.eclair.wire.internal.channel.version4

import com.softwaremill.quicklens.ModifyPimp
import fr.acinq.bitcoin.scalacompat.Crypto.PrivateKey
import fr.acinq.bitcoin.scalacompat.{ByteVector32, DeterministicWallet, OutPoint, Satoshi, SatoshiLong, Script, Transaction, TxId, TxIn, TxOut}
import fr.acinq.eclair.FeatureSupport.{Mandatory, Optional}
import fr.acinq.eclair.Features.{ChannelRangeQueries, PaymentSecret, VariableLengthOnion}
import fr.acinq.eclair.TestUtils.randomTxId
import fr.acinq.eclair.blockchain.fee.{FeeratePerByte, FeeratePerKw}
import fr.acinq.eclair.channel.LocalFundingStatus.DualFundedUnconfirmedFundingTx
import fr.acinq.eclair.channel._
import fr.acinq.eclair.channel.fund.InteractiveTxBuilder.{InteractiveTxParams, PartiallySignedSharedTransaction, RequireConfirmedInputs, SharedTransaction}
import fr.acinq.eclair.channel.fund.InteractiveTxSigningSession.UnsignedLocalCommit
import fr.acinq.eclair.channel.fund.{InteractiveTxBuilder, InteractiveTxSigningSession}
import fr.acinq.eclair.transactions.Transactions._
import fr.acinq.eclair.transactions.{CommitmentSpec, Scripts}
import fr.acinq.eclair.wire.internal.channel.ChannelCodecsSpec.normal
import fr.acinq.eclair.wire.internal.channel.version4.ChannelCodecs4.Codecs._
import fr.acinq.eclair.wire.internal.channel.version4.ChannelCodecs4.channelDataCodec
import fr.acinq.eclair.wire.protocol.{LiquidityAds, TxSignatures}
import fr.acinq.eclair.{BlockHeight, CltvExpiryDelta, Features, MilliSatoshi, MilliSatoshiLong, UInt64, randomBytes32, randomKey}
import org.scalatest.funsuite.AnyFunSuite
import scodec.bits._

import scala.util.Random

class ChannelCodecs4Spec extends AnyFunSuite {

  test("basic serialization test (NORMAL)") {
    val data = normal
    val bin = channelDataCodec.encode(data).require
    val check = channelDataCodec.decodeValue(bin).require.asInstanceOf[ChannelDataWithCommitments]
    assert(data.commitments.latest.localCommit.spec == check.commitments.latest.localCommit.spec)
    assert(data == check)
  }

  test("encode/decode channel configuration options") {
    assert(channelConfigCodec.encode(ChannelConfig(Set.empty[ChannelConfigOption])).require.bytes == hex"00")
    assert(channelConfigCodec.decode(hex"00".bits).require.value == ChannelConfig(Set.empty[ChannelConfigOption]))
    assert(channelConfigCodec.decode(hex"01f0".bits).require.value == ChannelConfig(Set.empty[ChannelConfigOption]))
    assert(channelConfigCodec.decode(hex"020000".bits).require.value == ChannelConfig(Set.empty[ChannelConfigOption]))

    assert(channelConfigCodec.encode(ChannelConfig.standard).require.bytes == hex"0101")
    assert(channelConfigCodec.encode(ChannelConfig(ChannelConfig.FundingPubKeyBasedChannelKeyPath)).require.bytes == hex"0101")
    assert(channelConfigCodec.decode(hex"0101".bits).require.value == ChannelConfig(ChannelConfig.FundingPubKeyBasedChannelKeyPath))
    assert(channelConfigCodec.decode(hex"01ff".bits).require.value == ChannelConfig(ChannelConfig.FundingPubKeyBasedChannelKeyPath))
    assert(channelConfigCodec.decode(hex"020001".bits).require.value == ChannelConfig(ChannelConfig.FundingPubKeyBasedChannelKeyPath))
  }

  test("encode/decode optional channel reserve") {
    val localParams = LocalParams(
      randomKey().publicKey,
      DeterministicWallet.KeyPath(Seq(42L)),
      Satoshi(660),
      MilliSatoshi(500000),
      Some(Satoshi(15000)),
      MilliSatoshi(1000),
      CltvExpiryDelta(36),
      50,
      Random.nextBoolean(),
      Random.nextBoolean(),
      Some(hex"deadbeef"),
      None,
      Features().initFeatures())
    val remoteParams = RemoteParams(
      randomKey().publicKey,
      Satoshi(500),
      UInt64(100000),
      Some(Satoshi(30000)),
      MilliSatoshi(1500),
      CltvExpiryDelta(144),
      10,
      randomKey().publicKey,
      randomKey().publicKey,
      randomKey().publicKey,
      randomKey().publicKey,
      Features(),
      None)

    {
      val localCodec = localParamsCodec(ChannelFeatures())
      val remoteCodec = remoteParamsCodec(ChannelFeatures())
      val decodedLocalParams = localCodec.decode(localCodec.encode(localParams).require).require.value
      val decodedRemoteParams = remoteCodec.decode(remoteCodec.encode(remoteParams).require).require.value
      assert(decodedLocalParams == localParams)
      assert(decodedRemoteParams == remoteParams)
    }
    {
      val localCodec = localParamsCodec(ChannelFeatures(Features.DualFunding))
      val remoteCodec = remoteParamsCodec(ChannelFeatures(Features.DualFunding))
      val decodedLocalParams = localCodec.decode(localCodec.encode(localParams).require).require.value
      val decodedRemoteParams = remoteCodec.decode(remoteCodec.encode(remoteParams).require).require.value
      assert(decodedLocalParams == localParams.copy(initialRequestedChannelReserve_opt = None))
      assert(decodedRemoteParams == remoteParams.copy(initialRequestedChannelReserve_opt = None))
    }
  }

  test("encode/decode optional shutdown script") {
    val codec = remoteParamsCodec(ChannelFeatures())
    val remoteParams = RemoteParams(
      randomKey().publicKey,
      Satoshi(600),
      UInt64(123456L),
      Some(Satoshi(300)),
      MilliSatoshi(1000),
      CltvExpiryDelta(42),
      42,
      randomKey().publicKey,
      randomKey().publicKey,
      randomKey().publicKey,
      randomKey().publicKey,
      Features(ChannelRangeQueries -> Optional, VariableLengthOnion -> Mandatory, PaymentSecret -> Mandatory),
      None)
    assert(codec.decodeValue(codec.encode(remoteParams).require).require == remoteParams)
    val remoteParams1 = remoteParams.copy(upfrontShutdownScript_opt = Some(ByteVector.fromValidHex("deadbeef")))
    assert(codec.decodeValue(codec.encode(remoteParams1).require).require == remoteParams1)

    val dataWithoutRemoteShutdownScript = normal.modify(_.commitments.params.remoteParams).setTo(remoteParams)
    assert(channelDataCodec.decode(channelDataCodec.encode(dataWithoutRemoteShutdownScript).require).require.value == dataWithoutRemoteShutdownScript)

    val dataWithRemoteShutdownScript = normal.modify(_.commitments.params.remoteParams).setTo(remoteParams1)
    assert(channelDataCodec.decode(channelDataCodec.encode(dataWithRemoteShutdownScript).require).require.value == dataWithRemoteShutdownScript)
  }

  test("encode/decode rbf status") {
    val channelId = randomBytes32()
    val fundingInput = InputInfo(OutPoint(randomTxId(), 3), TxOut(175_000 sat, Script.pay2wpkh(randomKey().publicKey)), ByteVector.empty)
    val fundingTx = SharedTransaction(
      sharedInput_opt = None,
      sharedOutput = InteractiveTxBuilder.Output.Shared(UInt64(8), ByteVector.empty, 100_000_600 msat, 74_000_400 msat, 0 msat),
      localInputs = Nil, remoteInputs = Nil,
      localOutputs = Nil, remoteOutputs = Nil,
      lockTime = 0
    )
    val commitTx = CommitTx(
      fundingInput,
      Transaction(2, Seq(TxIn(fundingInput.outPoint, Nil, 0)), Seq(TxOut(150_000 sat, Script.pay2wpkh(randomKey().publicKey))), 0),
    )
    val waitingForSigs = InteractiveTxSigningSession.WaitingForSigs(
      InteractiveTxParams(channelId, isInitiator = true, 100_000 sat, 75_000 sat, None, randomKey().publicKey, Nil, 0, 330 sat, FeeratePerKw(500 sat), RequireConfirmedInputs(forLocal = false, forRemote = false)),
      fundingTxIndex = 0,
      PartiallySignedSharedTransaction(fundingTx, TxSignatures(channelId, randomTxId(), Nil)),
      Left(UnsignedLocalCommit(0, CommitmentSpec(Set.empty, FeeratePerKw(1000 sat), 100_000_000 msat, 75_000_000 msat), commitTx, Nil)),
      RemoteCommit(0, CommitmentSpec(Set.empty, FeeratePerKw(1000 sat), 75_000_000 msat, 100_000_000 msat), randomTxId(), randomKey().publicKey),
      Some(LiquidityAds.PurchaseBasicInfo(isBuyer = true, 100_000 sat, LiquidityAds.Fees(1000 sat, 500 sat))),
    )
    val testCases = Map(
      DualFundingStatus.WaitingForConfirmations -> DualFundingStatus.WaitingForConfirmations,
      DualFundingStatus.RbfRequested(CMD_BUMP_FUNDING_FEE(null, FeeratePerKw(750 sat), fundingFeeBudget = 100_000.sat, 0, None)) -> DualFundingStatus.WaitingForConfirmations,
      DualFundingStatus.RbfInProgress(None, null, None) -> DualFundingStatus.WaitingForConfirmations,
      DualFundingStatus.RbfWaitingForSigs(waitingForSigs) -> DualFundingStatus.RbfWaitingForSigs(waitingForSigs),
      DualFundingStatus.RbfWaitingForSigs(waitingForSigs.copy(liquidityPurchase_opt = None)) -> DualFundingStatus.RbfWaitingForSigs(waitingForSigs.copy(liquidityPurchase_opt = None)),
      DualFundingStatus.RbfAborted -> DualFundingStatus.WaitingForConfirmations,
    )
    testCases.foreach { case (status, expected) =>
      val encoded = dualFundingStatusCodec.encode(status).require
      val decoded = dualFundingStatusCodec.decode(encoded).require.value
      assert(decoded == expected)
    }
  }

  test("decode unconfirmed dual funded") {
    // data encoded with the previous version of eclair, when Shared.Input did not include a pubkey script
    val raw = ByteVector.fromValidHex("0x020001ff02000000000000002a2400000000000000000000000000000000000000000000000000000000000000000000000000003039000000000000006400000000000000c8000000000000012c02000000000000002b04deadbeef000000000000006400000000000000c8000000000000012c00000000000000000000000042000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003e80000000000000000000000000000000000000000000000000000000000000000ff000000000000006400000000000000c8ff0001240000000000000000000000000000000000000000000000000000000000000000000000002be803000000000000220020eb72e573a9513d982a01f0e6a6b53e92764db81a0c26d2be94c5fc5b69a0db7d475221024d4b6cd1361032ca9bd2aeb9d900aa4d45d9ead80ac9423374c451a7254d076621031b84c5567b126440995d3ed5aaba0565d71e1834604819ff9c17f5e9d5dd078f52ae00000000024d4b6cd1361032ca9bd2aeb9d900aa4d45d9ead80ac9423374c451a7254d0766031b84c5567b126440995d3ed5aaba0565d71e1834604819ff9c17f5e9d5dd078f000000000000000000000000014a000002ee0000")
    val decoded = fundingTxStatusCodec.decode(raw.bits).require.value.asInstanceOf[LocalFundingStatus.DualFundedUnconfirmedFundingTx]

    // check that our codec will set the pubkeyscript using the one from the funding params
    val channelId = ByteVector32.Zeroes
    val script = Scripts.multiSig2of2(PrivateKey(ByteVector.fromValidHex("01" * 32)).publicKey, PrivateKey(ByteVector.fromValidHex("02" * 32)).publicKey)
    val dualFundedUnconfirmedFundingTx = DualFundedUnconfirmedFundingTx(
      PartiallySignedSharedTransaction(
        SharedTransaction(
          // we include the correct pubkey script here
          Some(InteractiveTxBuilder.Input.Shared(UInt64(42), OutPoint(TxId(ByteVector32.Zeroes), 0), Script.write(Script.pay2wsh(script)), 12345L, MilliSatoshi(100), MilliSatoshi(200), MilliSatoshi(300))),
          sharedOutput = InteractiveTxBuilder.Output.Shared(UInt64(43), ByteVector.fromValidHex("deadbeef"), MilliSatoshi(100), MilliSatoshi(200), MilliSatoshi(300)),
          localInputs = Nil, remoteInputs = Nil, localOutputs = Nil, remoteOutputs = Nil, lockTime = 0
        ),
        localSigs = TxSignatures(channelId, TxId(ByteVector32.Zeroes), Nil)
      ),
      createdAt = BlockHeight(1000),
      fundingParams = InteractiveTxParams(channelId = channelId, isInitiator = true, localContribution = 100.sat, remoteContribution = 200.sat,
        sharedInput_opt = Some(InteractiveTxBuilder.Multisig2of2Input(
          InputInfo(OutPoint(TxId(ByteVector32.Zeroes), 0), TxOut(1000.sat, Script.pay2wsh(script)), Script.write(script)),
          0,
          PrivateKey(ByteVector.fromValidHex("02" * 32)).publicKey
        )),
        remoteFundingPubKey = PrivateKey(ByteVector.fromValidHex("01" * 32)).publicKey,
        localOutputs = Nil, lockTime = 0, dustLimit = 330.sat, targetFeerate = FeeratePerKw(FeeratePerByte(3.sat)), requireConfirmedInputs = RequireConfirmedInputs(forLocal = false, forRemote = false)),
      liquidityPurchase_opt = None
    )
    assert(decoded == dualFundedUnconfirmedFundingTx)

    val dualFundedUnconfirmedFundingTx1 = dualFundedUnconfirmedFundingTx.copy(
      liquidityPurchase_opt = Some(LiquidityAds.PurchaseBasicInfo(isBuyer = true, 250_000 sat, LiquidityAds.Fees(1500 sat, 700 sat)))
    )
    assert(fundingTxStatusCodec.decode(fundingTxStatusCodec.encode(dualFundedUnconfirmedFundingTx1).require).require.value == dualFundedUnconfirmedFundingTx1)
  }

  test("decode local params pay commit tx fees field") {
    // The data in this test was encoded using eclair v0.10.0, where a single is_initiator boolean was encoded instead
    // of two separate booleans (is_channel_opener and pay_commit_tx_fees).
    val initiator = hex"000e0158e6936235824897192ae96caea018191fd812bc94f8421b65bd476faf9e30d901010002aaaa00ce2f18a967dc4f25f414e671ba6585f8ef0b8c5fb812c21064f55a2eaa0009828b4e829a55e78d7711e93ba9a9502dd7a6d0ef2910258323efe35533ddff0f80000001000000000000044c000000001dcd65000000000000002710000000000000000000900064ff000000186b02000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020a498202bbbb671d15145722fb8c28d732cddb249bcc6652ed2b297ff1f77a18371b1e6300000000000003e8000000003b9aca000000000000004e2000000000000003e80090001e02e89c4b89177eb7cd291a21c610e9ac4445a558430e9943767481e29d1d1d790902a10d318e979d1b74de10cb66f716126ca0accd1922a0e3cdae90bdbfe637772802b2b6c791a935a20ce98a0b349e1ffb7a88121478f5dc39d3715b2416878d1d35039c795469e7814b454aee2d36f3c33ef56c34192ab49736c74d02a6697ece8f7b00000004020a498200000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000025b9fd5132058bc95861f228b98d7a6b6ff341ae7492e3f91978ed745470d27a6065e020000000101010101010101010101010101010101010101010101010101010101010101012a00000000ffffffff0140420f00000000002200209997cca7a6aed2533b0014929deeb88341516dcb5d01fbd1071681fa566650960000000000010000000000000000000000002710000000002faf0800000000000bebc2002458e6936235824897192ae96caea018191fd812bc94f8421b65bd476faf9e30d9000000002b40420f00000000002200209997cca7a6aed2533b0014929deeb88341516dcb5d01fbd1071681fa56665096475221025b9fd5132058bc95861f228b98d7a6b6ff341ae7492e3f91978ed745470d27a62102b90d8c2b072181a56fd6fbd5be9e1f723dee869d79ef4278450b01f09c3fa37f52ae7d020000000158e6936235824897192ae96caea018191fd812bc94f8421b65bd476faf9e30d90000000000deefa28002400d030000000000160014b2e9d9708cd135eec2ffc2dce8c4860b4b41e8b4b8180c0000000000220020de29e3b845619436603ee692c2d8a56a116599bf6ec1332e7ec51d09e26f7bc5123a44209c41e27950a3cc928116474ff4c92279124c00919e37174cb6e5011c208ca69807d936ecb290f93c797592d709ae72672e151aad4c15929c5c649e761f5fa05000000000000000000000000000002710000000000bebc200000000002faf0800ce0de659e08f34dda3a8710267d96bb0af73fd78f559efa3cc8f846f2f6dba1f03d64b4a3d14f322bdad603bfb9359cd08d2b9b0efce54aa0fe787b2e3406c26a2000000ff0338f1d042dcb5dcfb7b0b29c58fd3ecb9d9b0957fa03703bf515433854800b1f100000000000001061a8000002a000000010289b8c594531eebff023976e44871e45500885e48c0ebe39357451ff3914d0a6648d576d4d62b8274d38ab1b41691c78d68562764c8771495b2517fe7fff8d75fd7622d54c466ac93baee1d6fac4a53ddef0d06226e46111a0b59caaf126043eb5bbf28c34f3a5e332a1fc7b2b73cf188910f0289b8c594531eeb6605b1300300009000000000000003e8000858b800000014000000001dcd650000000001"
    val initiatorDecoded = channelDataCodec.decode(initiator.bits).require.value.asInstanceOf[DATA_NORMAL]
    assert(initiatorDecoded.commitments.params.localParams.isChannelOpener)
    assert(initiatorDecoded.commitments.params.localParams.paysCommitTxFees)
    val nonInitiator = hex"000e0158e6936235824897192ae96caea018191fd812bc94f8421b65bd476faf9e30d901010002bbbb671d15145722fb8c28d732cddb249bcc6652ed2b297ff1f77a18371b1e63000927012067c2958dc0317a439185b5619e15c528726ebb2b75b4e6ae80c89468a28000000000000000000003e8000000003b9aca000000000000004e2000000000000003e80090001e000000000004020a498202aaaa00ce2f18a967dc4f25f414e671ba6585f8ef0b8c5fb812c21064f55a2eaa000000000000044c000000001dcd6500000000000000271000000000000000000090006402a69186cd9e36bcb3dd3e92be5e1224984239175c4e3afdf7d6a14023042dc5bd03c191e410e8545c6fc8aeee9aeb5a10cec30c03e950b9920b2474eb09e1cab70e037ca17e6afb2fab6e03fa4aac50be6d9beffea390761ee2ff6ef336e2783101c0036e0b2571509ce82bd31dfb1e810c1c2c294430a02d58fe997f4a7a2d06508ccc0000186b02000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020a49820000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000002b90d8c2b072181a56fd6fbd5be9e1f723dee869d79ef4278450b01f09c3fa37f065e020000000101010101010101010101010101010101010101010101010101010101010101012a00000000ffffffff0140420f00000000002200209997cca7a6aed2533b0014929deeb88341516dcb5d01fbd1071681fa566650960000000000010000000000000000000000002710000000000bebc200000000002faf08002458e6936235824897192ae96caea018191fd812bc94f8421b65bd476faf9e30d9000000002b40420f00000000002200209997cca7a6aed2533b0014929deeb88341516dcb5d01fbd1071681fa56665096475221025b9fd5132058bc95861f228b98d7a6b6ff341ae7492e3f91978ed745470d27a62102b90d8c2b072181a56fd6fbd5be9e1f723dee869d79ef4278450b01f09c3fa37f52ae7d020000000158e6936235824897192ae96caea018191fd812bc94f8421b65bd476faf9e30d90000000000deefa28002400d0300000000002200201f9ecd10ef79baef28367302176824ca2a62bd566e18cb705bf5286d2e667eefb8180c000000000016001490c2a2723c9873ec2931c49515e64a610967039e123a44200cebdab89f4b171f63558d1f30e9416b21907adbb0208e7288dfa61bb6b702852ba3acd0569e913ec5d7ef5b6e350d82bac30cfecb08ffffb0742f1948736bbe00000000000000000000000000002710000000002faf0800000000000bebc200a45281427a62b46937d6209986950c76616f874f3d266cb796ec202d441e314302f05e6396357b0a0dc6467f5324760e66eab5dbc0c0875e183742672ddc47ec0a000000ff032af65d7da1b3c4c61145c759eb36296e1b5608c909e0bcd761d1908ac3c571ce00000000000001061a8000002a00000001023976e44871e455ff0289b8c594531eeb0088cdd6527cef83026f1a2ff2e626bdfd94aa2eddd11450b2ab6dca617af53db0c91c81dafe1bbe47757c62eb4709d5f9fb27c456409dff7d1d610aed6ffad1be9a06226e46111a0b59caaf126043eb5bbf28c34f3a5e332a1fc7b2b73cf188910f023976e44871e4556605b12f030100900000000000000000000858b800000014000000001dcd650000000001"
    val nonInitiatorDecoded = channelDataCodec.decode(nonInitiator.bits).require.value.asInstanceOf[DATA_NORMAL]
    assert(!nonInitiatorDecoded.commitments.params.localParams.isChannelOpener)
    assert(!nonInitiatorDecoded.commitments.params.localParams.paysCommitTxFees)
  }

  test("encode/decode cold origins") {
    val origins = Map(
      13L -> Origin.Cold(Upstream.Cold.Channel(randomBytes32(), 2765, 1863 msat)),
      27L -> Origin.Cold(Upstream.Cold.Trampoline(Upstream.Cold.Channel(randomBytes32(), 541, 6500 msat) :: Nil)),
      28L -> Origin.Cold(Upstream.Cold.Trampoline(Upstream.Cold.Channel(randomBytes32(), 0, 0 msat) :: Upstream.Cold.Channel(randomBytes32(), 6778, 250_000_001 msat) :: Nil)),
    )
    val encoded = originsMapCodec.encode(origins).require
    val decoded = originsMapCodec.decode(encoded).require.value
    assert(decoded == origins)
  }

  test("decode origin backwards compatibility") {
    // The following values were encoded with eclair v0.10.0.
    val channelRelayed = Origin.Cold(Upstream.Cold.Channel(ByteVector32(hex"fe99ac49738d44ff8b73d8e5da01e868584a2071326320e8f51fe8bdbbe84c64"), 1561, 1721 msat))
    val channelRelayedBin = hex"0002fe99ac49738d44ff8b73d8e5da01e868584a2071326320e8f51fe8bdbbe84c64000000000000061900000000000006b900000000000005dc"
    assert(originCodec.decode(channelRelayedBin.bits).require.value == channelRelayed)
    val trampolineRelayed = Origin.Cold(Upstream.Cold.Trampoline(Upstream.Cold.Channel(ByteVector32(hex"19a3e2f5b1d747e6e59cec57d927c068c976eab0b914a1bf66aaacaa0917d49d"), 17, 0 msat) :: Upstream.Cold.Channel(ByteVector32(hex"4fbf1090bf27e4ef3af8b784f8e0e62dd2fc836775131d6e58400a68ec8fcf2c"), 21, 0 msat) :: Nil))
    val trampolineRelayedBin = hex"0004000219a3e2f5b1d747e6e59cec57d927c068c976eab0b914a1bf66aaacaa0917d49d00000000000000114fbf1090bf27e4ef3af8b784f8e0e62dd2fc836775131d6e58400a68ec8fcf2c0000000000000015"
    assert(originCodec.decode(trampolineRelayedBin.bits).require.value == trampolineRelayed)
  }

  test("include directed htlc_id for closing channel") {
    val closing1 = channelDataCodec.decode(hex"0011015847757d05a5e2639d5777a9f46a8dff49fcd5dfba142d93c4de6af54e4620e701010310100002aaaa00ce2f18a967dc4f25f414e671ba6585f8ef0b8c5fb812c21064f55a2eaa0009888a8f1a9231e36da2168b0c3147a097dfab1f4798cc0a31d3e1dce336471cd080000001000000000000044c000000001dcd65000000000000002710000000000000000000900064c0000000186b02000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000001808022a698202bbbb671d15145722fb8c28d732cddb249bcc6652ed2b297ff1f77a18371b1e6300000000000003e8000000003b9aca000000000000004e2000000000000003e80090001e03b0a410a12070c62d9b401915adead19b3ff2ccdca0e26eb6ef3bfcaf441ea243033429bb2a4d35268c55113ea97544f4e5c74e85d5fc686722b00927572ae1778303e62d2b2f0eb6256482a72e0b3680e5a2ce9f81b09822336c1b253df3fad71e40023b7b1a73bfc39356e17713e070cd4e9d5206cb4a6b2b0c5965bb687c39f5d7d2000000140800000000000000000000000000100802aa6982000000014a00825847757d05a5e2639d5777a9f46a8dff49fcd5dfba142d93c4de6af54e4620e700000000000000004422f65fd6bb15259a70d2ec79aaa6953d2a58e7d3a4eae779276eab45fe40f30000000000000000000000000000000000040000000000000001000200fd05b15847757d05a5e2639d5777a9f46a8dff49fcd5dfba142d93c4de6af54e4620e7000000000000000300000000047868c0e60afd49d053a0660837e692ca97e6a3a83536bd40a7cce944d0e2c1d2abe7dd00061b10000332c48fe95695da4f2099a3943abf99be9705cbec2f1af961298d701bec53decce487d6910cead042d5a45c37b7009fa196fa2dbc55b44490000a6a60f7a18d7b2fd832253c16a70295a8099a685c42da3a0334248bcfd91417dde694c3a0afd9afdd74f710b6df5a0e1674432670728a221c4eb52b4a4971cfdc8a8205493ce15d3ac666ac8cd6fd579fd62a17b946319c9b67fe2e401c0a5685430a08cf7da7309f54a23cc0d2e5b72d643cdb9a63e8a8f3add3130cca9eac0efc23db0c97da94d1ea8fb512d6b0a2fa47c21b43b034bfb0f2918585c62d6f4af2a95c4ffa27632cd3724033a53fe1d78fe7ae98b81e6e724949182fb1e214765796de6ea9622af13d6e90181c66287ffd2811b4fd8b6b71d50ff45d8ec297906b8d917262eb9572fe92ca181480037d9e0a0c81d6df5894f70e989579a0a363bd5a690d69752d854ae28c79025082e59c01345c2b054f43655d94fc6c088e12be04266f2c1aa6574ede4f20892acbd531f82321a752c65a8760f264e9de46f4462b2bba67192cdeb4e281a371a121595e8389cdd90885cc51b05f3712ec2dfb934ee90709affde926c6b6eb542709cb2d8bced2ac903bd8c15ecf9fc2189929ea031133ff1b4897b26ae5da97e9ed49d25bbf0143a22c0827b0b24b6a020fe2ce5f769939d71c1ddc94b7ebbb84547b1b1f49e90728d19bd55f3730044e583089cea132462184c6ce6d7f7b07b4b2bd6fdf89f1340b65031813a9abe9ce51377885235bffc005346af8218e9d32410c7c0584ae13a4b0e75075b76fddc9ce36ab9ec3dae511cef81760d98653431a464dc81bbef029797896032f9601d9a6b0c45ad790b0f16914c382d698dc46111a6d4aed0f7515e338d1e3668ae27bf06c0b50f14f9ec8e14abc88ac68b0ad3c6c4cc307ce6b6c084ec3399c1b1a7748d61911ee1c425973c737b55d4504f4509e25d5efb5793fc382cd7e0f260bbba79e666f09dad12aded5d402bc99e65098f4ad68f5f88179930cace8b9b23720f3261efa542cb2b0c488fd6d0ddc3566b6896580349b90584ba61bea6c20a1541be43f71f74db167282ab6e19501f477835a4d444717de9b1f70361cbceed8b71b51e91fd939084c53199fe3171a22cf53bbcb8b245a523cf5af1a40bb9ba6e86f8592d9292bfa3efdce8a34583eb32beebb0c8847e051802f977e6e63765c3235fc7b8b3964f3b82ec5686e77f5901cf3887e5653ec5f2b02842454274db8bc9fa1bd73d6fa1ef786bca55fd6813e3016abc4ba87db319ac6ab7ddf8b9ee11cd92f3a506b3af86e825cea498a5ce72dc6a6c763e6392a21edd3722d6a049011530ebfc6f0784430ebdbd5e4fe3c35bed8cfc51d915a101ffb87cf2b269274aaaf8b37ead9451e371ee8b5958ea8300ee568c707c913344f4bb5344e62b095384212b1d8b00873af5feb6e756818e0806e42771875911aa67ab6e0c4077f67a6a8841ca0fc69d57c818152a52d8468f4cd623feb1a30241834a3d02348c103ccefde6997709bc8e7569efabf4c5f712826fb03ba1c01e8f57edb113734e03a4933223149b4ecd844e933210ab4ca366d630b02005a8d0189737a2bff410f0a97aa3ae5811877e27de9b451e35f1c901c379f864e02c823ad6cf3e92db32437f53c108960a012c4d28d3b66f39b66b1b57af170b00fb976fc63b6123cb22ee216cdc48b0a9e8e11bef5fc36f6e5bf3d40eb28f7c0d7c498d7c740c0008a9cade8d147fd99a5b323b92e93fc64ec2599d7d19a997fcf8653f059e082fda5bed8c79ee29c356597a56dc08a5965aa69f44b7d2377d7bf75819a74721eddc5218cf1f16a1ff5f50e37fe14a51d4206d576ce63c2b9cf472e871fa253a36e4c469abfaf17e8e910f966b6ce0075a6088a45cdcf4ef095df06e37ed994b5e0fe0001a1470107fffd05b15847757d05a5e2639d5777a9f46a8dff49fcd5dfba142d93c4de6af54e4620e700000000000000000000000004c4b40095cc3acd7792306bc5792d504325926816fe42457c6ad29b00741901fbe46d6c00061b10000281f8622444b2130756cff4fa963aebe1a6591ba779ae258b2c4a4d29bd1f1c5227f7db4ff5d623465d52dae4445a3e4079fb3d10e286e1f51c38e5f336e543ffd11936c2802f5f952689b7f6aab330304fab68e3eb52eaf384291241330c1e397275f0b5c75033f68ac4231db6e9909bba53fe6f5c811f1d08043d47c2c29830cc1765297c6f175dcd0fc66aba6939a5d8572c1e6211f38081b6072ce0baa79f51d5a24b4ad545a57fc40d55b5a6e2f403789635478df97f821b5ac59bade80d3ff7a61619818924fd22397f8eab9ba8b627cc1574f217ed31ab8beb2f14568d2959b859baa7ecbdc7f83d58f24c406c9600081d087a039c01c42e8e998558265318a63c17c8768a4f5aa08c611f24378f8f05b376e51b9cb2d303fc587f25112e2b02fee7783ee6956c1cfc170a3e5e4efe3daed57dbd60d82b3ddb2c3621150a29b043a99aa25ec4e1e6dd8cd3e530fb423b2826a97f7947e73fda2d0334f22282f65306a54d0544fac2b2e1910f3627cfa9cc933fc70f78c70f8d9e7a48988981393355c0170d7ae1b5e3bf0cbac64796ef9780b6bee51394d9dab37f7706318c29432cc28ce7133c6f9ab109e414b1c721bd61acecc903c3cf7018eeac6cd76414905abb2139f32225238d546f70b18164d48f46521b367053fcb3ddf58256c46296f0a38f049e789248bb3b91744206e445444280487eb53e35af868c9a5c097be32413523e25ec589fff8809053c68ac22c312e113c8266f1f4e6648f48ba435d03a5dcd22eae0065e5dd2a4e8054952fefb71630350ea229b6a22e3799713fce8b97e89dfa792a140f3105a32fc3e61b9e536ecf7e0617c4e285eab7a6aa3ea53842ac994e302c1699f0efc2fb9d8ac7ece2179821cb94d8c52079c74fc4178bbce4031137f1c78d2275eae8e7dd43b627329261fe8215421b4aa5e3ad3034686801863132707eb2b36f0510c90ba0cb901c05a9b32d3535669b2ed2a43d594ded9bb4c6ff228b352737fe84bddae6b2f6320d46853e30b14c842aadd9ad2f19d0ef26ee99f1bfad18983b3fd523fd55af06c2a95a8bf9eee832028d23a48667dbb4132cdabad7939dde02e77e3f0848a433591a4e75115623fb29bf03a88a2a744dbbcd6997e079150f1818ef6d31880665ba03ba9e9def8fd468f9fd2ef67f240dbb6c74c2f2ba303ff544db022ad5d034080e6eebaee744500f5d970837658661bd09c6ce4fed4fb828743ea26624b256318e6741f005533692c8a4e67296551f393a922a3576a03a2b1734acfbd4574663dcaeb594d5572b6006b8f593d25b91ba19991c5df5e9861a85206a677beff4c89426b374f150514331864a436f5477f2d1533584ef56dc0b9f2d4c8743e0dcae471a1eafde3b9c353bbbef9fe41305ec332b7e1043282fc7c057d4ebeb15e6c3f2cd774d73842bc20724f4a965c902d13088329ed66783467b03c186a6ed2f5ab19d62a0ac03a01eccdbbd6d1f09fc9d6113b33dabe3140b10bccefeccaa66ea04850818293d44a33829dd6cc80b2be8e9ebbf3061fde598a603d4fe8f4135dee713f4f88459c2ac791d89ad7cb59f0dcbfd96d2ddc954ea735a9aeaee8f47127b7dd4cfd7b08019602e8acc6cd37a7d640e24b589abf2bcb9d1eb4abd19bbe1150938ff90f49b9c5203f1c17c8b85c8a26105995f053fa54f56db9bfdd10f37d9aba6899a2ed375f49197cc3e36cc82839edc36f37d5b661ced3a7528f8f8e438aeb6e8f5c566fa9249fca6966a2dc26f01ae949dabbbdfd03a849b17351dbfa181b219abe93bc97d793f5f72a1d19adaa92043e0ec1200b592c52b3270fd77560f5f2b4340bf936366d79dab9d6c1c7c867019019324b7a74c8d82990e21d2b7bb55ec836f2dbbb2543b77a6f565475ab4fea1822c99a4c1e5885b280fe0001a147010700010000000000000000000000000392de23ee259d18e48e80b3dc7dad83f8cd87a64b4ac0da7dd94871e5ea876ec60a5e020000000101010101010101010101010101010101010101010101010101010101010101012a00000000ffffffff0140420f00000000002200203ac31ef83f5b594ea58c988be0f62bfef04500ba6d678c11aaeeda1fe662f0c700000000061a8000002a000000000200000000000000070002000000000000000003ff0000000000000000000009c40000000007735940000000002aea5400245847757d05a5e2639d5777a9f46a8dff49fcd5dfba142d93c4de6af54e4620e7000000002b40420f00000000002200203ac31ef83f5b594ea58c988be0f62bfef04500ba6d678c11aaeeda1fe662f0c7475221032991639ef70a233d4d0df569b4d065ed8df5b68ccb507208b8f10984c5a297b6210392de23ee259d18e48e80b3dc7dad83f8cd87a64b4ac0da7dd94871e5ea876ec652aefd013502000000015847757d05a5e2639d5777a9f46a8dff49fcd5dfba142d93c4de6af54e4620e700000000004c2d0d80064a010000000000002200200f4391a26bcc5afde68e6465183d9b38c91f7b096fb0c3afd8f0561c3a406ea54a01000000000000220020a4bfb70b647bd0ad161401e362f88c00d41151a2b3d4d058a7c23dda3fc755aef82401000000000022002084f49a8cfdec3da99b5faa1459f97c3838223cd8a0ed102ce9365ae154c6d9b5803801000000000022002099f285919d127466e41c9cf5044afbbe12ecb2f6408be9d7cbab3625d6e85d415ed701000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e480fc0a00000000002200200ef18b6f3cdd44b9028e77fd9041c643ba5c5e27de4571405d169fb34ddd7b4dc886ad207b5bf5eb953734dcc0d6a94161f2bf5cdc6fac417dd69b52220c6308768af21906ca7423d76ca3542a62a581e7ea505e5606583a48cd1f29c4f5462c6a38b1f3000212241dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd9020000002bf82401000000000022002084f49a8cfdec3da99b5faa1459f97c3838223cd8a0ed102ce9365ae154c6d9b58876a9146e2711de9703f69190ce9c77675c385fa44368838763ac6721027fafdc0dc58427092109a17a7a16a600730db3482352a04edafc99eccf1f802f7c820120876475527c2102d6a274c66362e55b5b2ac0a8f63cf7fa61b4374843e8cbbc28017dd7cf3e789c52ae67a914a397093635d220f06843b4dca27686b9591dc62a88ac6851b275685e02000000011dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd902000000000100000001771e01000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e4101b0600000000000000000300061b10067a0d3a45dfb874cc69c374aa4379885f02326e13e2eb65bf694a3ebcd902a869ef62d89258677fced5f4371a9dc2242d31ce84e2f1d65af2ad4ae3a3a1f12111241dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd9030000002b803801000000000022002099f285919d127466e41c9cf5044afbbe12ecb2f6408be9d7cbab3625d6e85d418e76a9146e2711de9703f69190ce9c77675c385fa44368838763ac6721027fafdc0dc58427092109a17a7a16a600730db3482352a04edafc99eccf1f802f7c8201208763a914ff7c99067754ff00b64b0c55f7bf392afda34a5788527c2102d6a274c66362e55b5b2ac0a8f63cf7fa61b4374843e8cbbc28017dd7cf3e789c52ae677503101b06b175ac6851b275685e02000000011dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd9030000000001000000019b3101000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e40000000095cc3acd7792306bc5792d504325926816fe42457c6ad29b00741901fbe46d6c000000000000000000061b10f4a0c14c421977d0fbfb4da089096f1b41559df84365b7270ad67e8b92fb28d34c514614affa5ea47eb2b2647457f9d2ea23fb47d449d8ccb9c4b202bac08a2100000000000000080002ff0000000000000003000000000000000000000009c4000000002aea54000000000007735940441c3be8f90738b9d65acd2896726cc8b9796b4c5aca307720997082f876d2ee0327e1109720bd3fc2432f24ca56709ce978688310e88141288440730a357f4d9b000000ff02d87e2e97bfb17b65793e748712a44445bfcc14db5337bcbf323e9faaa44e06da0001003d0000fffffffffff80100349e5c6e9d10f61e0ab643d0d82cee98332c306cbb2d825b6d9c4bcb92c1861c0003ffffffffffe000010000000000000003000369b82e7d4d2f49598062820ba3cad8970000061a80160014761879f7b274ce995f87150a02e75cc0c037e8e300000000fffd0212020000000001015847757d05a5e2639d5777a9f46a8dff49fcd5dfba142d93c4de6af54e4620e700000000004c2d0d80064a010000000000002200200f4391a26bcc5afde68e6465183d9b38c91f7b096fb0c3afd8f0561c3a406ea54a01000000000000220020a4bfb70b647bd0ad161401e362f88c00d41151a2b3d4d058a7c23dda3fc755aef82401000000000022002084f49a8cfdec3da99b5faa1459f97c3838223cd8a0ed102ce9365ae154c6d9b5803801000000000022002099f285919d127466e41c9cf5044afbbe12ecb2f6408be9d7cbab3625d6e85d415ed701000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e480fc0a00000000002200200ef18b6f3cdd44b9028e77fd9041c643ba5c5e27de4571405d169fb34ddd7b4d0400483045022100881537b143aff4129e0a1918d91ea02c0318d6aa2ee47e9265b6403f5cbe61bc022006f4a18a4bcd58160444daf5bc29f2ae1d460d18bb23076adfa92df656e6e62b0147304402207b5bf5eb953734dcc0d6a94161f2bf5cdc6fac417dd69b52220c6308768af219022006ca7423d76ca3542a62a581e7ea505e5606583a48cd1f29c4f5462c6a38b1f301475221032991639ef70a233d4d0df569b4d065ed8df5b68ccb507208b8f10984c5a297b6210392de23ee259d18e48e80b3dc7dad83f8cd87a64b4ac0da7dd94871e5ea876ec652aec886ad20ff241dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd9040000002b5ed701000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e44d63210321fe12ac0817cd8b7b32c43e1c37d341edc6b6c0ef2e7a4a193247569ad8ae4467029000b275210262ad7b97170d7443c86d24fc3f4e3fd0710f4eda2d0726f1d953fd49db573e2068acec020000000001011dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd90400000000900000000180c4010000000000160014761879f7b274ce995f87150a02e75cc0c037e8e3034730440220710e9165f60bd915b94714b59c8c2062b02adad671d1464385d03204aa885d3402203fab7f3a8987bf55c6ce6cbb95740e7f5c78c818eb1fc05b25ce36c5b2e2136601004d63210321fe12ac0817cd8b7b32c43e1c37d341edc6b6c0ef2e7a4a193247569ad8ae4467029000b275210262ad7b97170d7443c86d24fc3f4e3fd0710f4eda2d0726f1d953fd49db573e2068ac000000000002241dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd902000000ff12241dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd9020000002bf82401000000000022002084f49a8cfdec3da99b5faa1459f97c3838223cd8a0ed102ce9365ae154c6d9b58876a9146e2711de9703f69190ce9c77675c385fa44368838763ac6721027fafdc0dc58427092109a17a7a16a600730db3482352a04edafc99eccf1f802f7c820120876475527c2102d6a274c66362e55b5b2ac0a8f63cf7fa61b4374843e8cbbc28017dd7cf3e789c52ae67a914a397093635d220f06843b4dca27686b9591dc62a88ac6851b27568fd017d020000000001011dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd902000000000100000001771e01000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e405004730440220067a0d3a45dfb874cc69c374aa4379885f02326e13e2eb65bf694a3ebcd902a8022069ef62d89258677fced5f4371a9dc2242d31ce84e2f1d65af2ad4ae3a3a1f12183483045022100b9ea29e68afbc2ddc5e3cc2e15bb104e8914daa47154a55fa1540925ac45cea1022021e3440f5fbc93b11b78805d30bb02125b57e45f0acf2fe925ea42e3644d44eb01008876a9146e2711de9703f69190ce9c77675c385fa44368838763ac6721027fafdc0dc58427092109a17a7a16a600730db3482352a04edafc99eccf1f802f7c820120876475527c2102d6a274c66362e55b5b2ac0a8f63cf7fa61b4374843e8cbbc28017dd7cf3e789c52ae67a914a397093635d220f06843b4dca27686b9591dc62a88ac6851b27568101b0600000000000000000300061b10241dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd903000000ff11241dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd9030000002b803801000000000022002099f285919d127466e41c9cf5044afbbe12ecb2f6408be9d7cbab3625d6e85d418e76a9146e2711de9703f69190ce9c77675c385fa44368838763ac6721027fafdc0dc58427092109a17a7a16a600730db3482352a04edafc99eccf1f802f7c8201208763a914ff7c99067754ff00b64b0c55f7bf392afda34a5788527c2102d6a274c66362e55b5b2ac0a8f63cf7fa61b4374843e8cbbc28017dd7cf3e789c52ae677503101b06b175ac6851b27568fd01a4020000000001011dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd9030000000001000000019b3101000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e40500483045022100f4a0c14c421977d0fbfb4da089096f1b41559df84365b7270ad67e8b92fb28d302204c514614affa5ea47eb2b2647457f9d2ea23fb47d449d8ccb9c4b202bac08a21834830450221009f00e2782a17f91a5a7bbda12e8fd24aec9d967341d83c95f5f1f5cd7a39e97a02206591dbc6815ef01826186348db314e51d4a8c2247dc7b514d8147a02502cb2fd01204422f65fd6bb15259a70d2ec79aaa6953d2a58e7d3a4eae779276eab45fe40f38e76a9146e2711de9703f69190ce9c77675c385fa44368838763ac6721027fafdc0dc58427092109a17a7a16a600730db3482352a04edafc99eccf1f802f7c8201208763a914ff7c99067754ff00b64b0c55f7bf392afda34a5788527c2102d6a274c66362e55b5b2ac0a8f63cf7fa61b4374843e8cbbc28017dd7cf3e789c52ae677503101b06b175ac6851b275680000000095cc3acd7792306bc5792d504325926816fe42457c6ad29b00741901fbe46d6c000000000000000000061b10000224e456c1304d4f950521995e6df1a82ee9bd7b37fb096985ad5c50818180f0d4be000000002b771e01000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e44d63210321fe12ac0817cd8b7b32c43e1c37d341edc6b6c0ef2e7a4a193247569ad8ae4467029000b275210262ad7b97170d7443c86d24fc3f4e3fd0710f4eda2d0726f1d953fd49db573e2068aced02000000000101e456c1304d4f950521995e6df1a82ee9bd7b37fb096985ad5c50818180f0d4be00000000009000000001990b010000000000160014761879f7b274ce995f87150a02e75cc0c037e8e303483045022100e5bc8ad2039c412edfc977397feb1d274d3404995db5f1243a664148db316f6c02203a1b80894a4f5b610810ac75dc9e5ccdb31301e5e6dce4966251f6527ecb27a101004d63210321fe12ac0817cd8b7b32c43e1c37d341edc6b6c0ef2e7a4a193247569ad8ae4467029000b275210262ad7b97170d7443c86d24fc3f4e3fd0710f4eda2d0726f1d953fd49db573e2068ac0000000024b2911362612c021a5f9e5f3693483960b105ac335ccd7fa4085d9596cdc623a2000000002b9b3101000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e44d63210321fe12ac0817cd8b7b32c43e1c37d341edc6b6c0ef2e7a4a193247569ad8ae4467029000b275210262ad7b97170d7443c86d24fc3f4e3fd0710f4eda2d0726f1d953fd49db573e2068acec02000000000101b2911362612c021a5f9e5f3693483960b105ac335ccd7fa4085d9596cdc623a200000000009000000001bd1e010000000000160014761879f7b274ce995f87150a02e75cc0c037e8e30347304402200b8ae397cf7c0a30f25c5aa96540ce3600b5157dc52c5767a895a3982bcaf28e02206fc02f2481f5fc145ceba7c2c4cdf59753edd98a64c0a369fbfbc60473bcb51b01004d63210321fe12ac0817cd8b7b32c43e1c37d341edc6b6c0ef2e7a4a193247569ad8ae4467029000b275210262ad7b97170d7443c86d24fc3f4e3fd0710f4eda2d0726f1d953fd49db573e2068ac00000000000112241dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd9010000002b4a01000000000000220020a4bfb70b647bd0ad161401e362f88c00d41151a2b3d4d058a7c23dda3fc755ae2821032991639ef70a233d4d0df569b4d065ed8df5b68ccb507208b8f10984c5a297b6ac736460b2683302000000011dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd901000000000000000000000000000000061b100003245847757d05a5e2639d5777a9f46a8dff49fcd5dfba142d93c4de6af54e4620e700000000fd0212020000000001015847757d05a5e2639d5777a9f46a8dff49fcd5dfba142d93c4de6af54e4620e700000000004c2d0d80064a010000000000002200200f4391a26bcc5afde68e6465183d9b38c91f7b096fb0c3afd8f0561c3a406ea54a01000000000000220020a4bfb70b647bd0ad161401e362f88c00d41151a2b3d4d058a7c23dda3fc755aef82401000000000022002084f49a8cfdec3da99b5faa1459f97c3838223cd8a0ed102ce9365ae154c6d9b5803801000000000022002099f285919d127466e41c9cf5044afbbe12ecb2f6408be9d7cbab3625d6e85d415ed701000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e480fc0a00000000002200200ef18b6f3cdd44b9028e77fd9041c643ba5c5e27de4571405d169fb34ddd7b4d0400483045022100881537b143aff4129e0a1918d91ea02c0318d6aa2ee47e9265b6403f5cbe61bc022006f4a18a4bcd58160444daf5bc29f2ae1d460d18bb23076adfa92df656e6e62b0147304402207b5bf5eb953734dcc0d6a94161f2bf5cdc6fac417dd69b52220c6308768af219022006ca7423d76ca3542a62a581e7ea505e5606583a48cd1f29c4f5462c6a38b1f301475221032991639ef70a233d4d0df569b4d065ed8df5b68ccb507208b8f10984c5a297b6210392de23ee259d18e48e80b3dc7dad83f8cd87a64b4ac0da7dd94871e5ea876ec652aec886ad20241dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd902000000fd017d020000000001011dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd902000000000100000001771e01000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e405004730440220067a0d3a45dfb874cc69c374aa4379885f02326e13e2eb65bf694a3ebcd902a8022069ef62d89258677fced5f4371a9dc2242d31ce84e2f1d65af2ad4ae3a3a1f12183483045022100b9ea29e68afbc2ddc5e3cc2e15bb104e8914daa47154a55fa1540925ac45cea1022021e3440f5fbc93b11b78805d30bb02125b57e45f0acf2fe925ea42e3644d44eb01008876a9146e2711de9703f69190ce9c77675c385fa44368838763ac6721027fafdc0dc58427092109a17a7a16a600730db3482352a04edafc99eccf1f802f7c820120876475527c2102d6a274c66362e55b5b2ac0a8f63cf7fa61b4374843e8cbbc28017dd7cf3e789c52ae67a914a397093635d220f06843b4dca27686b9591dc62a88ac6851b27568101b0600241dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd903000000fd01a4020000000001011dd545f83c476102271f04dc690ef02c75d7febda458e9fdb4fb73811705cfd9030000000001000000019b3101000000000022002064a48a683d489888a75d7cf57d5427e6bc332b20acf6abca8085d52da28da7e40500483045022100f4a0c14c421977d0fbfb4da089096f1b41559df84365b7270ad67e8b92fb28d302204c514614affa5ea47eb2b2647457f9d2ea23fb47d449d8ccb9c4b202bac08a21834830450221009f00e2782a17f91a5a7bbda12e8fd24aec9d967341d83c95f5f1f5cd7a39e97a02206591dbc6815ef01826186348db314e51d4a8c2247dc7b514d8147a02502cb2fd01204422f65fd6bb15259a70d2ec79aaa6953d2a58e7d3a4eae779276eab45fe40f38e76a9146e2711de9703f69190ce9c77675c385fa44368838763ac6721027fafdc0dc58427092109a17a7a16a600730db3482352a04edafc99eccf1f802f7c8201208763a914ff7c99067754ff00b64b0c55f7bf392afda34a5788527c2102d6a274c66362e55b5b2ac0a8f63cf7fa61b4374843e8cbbc28017dd7cf3e789c52ae677503101b06b175ac6851b27568000000000000000000".bits).require.value.asInstanceOf[DATA_CLOSING]
    assert(closing1.localCommitPublished.nonEmpty)
    val lcp = closing1.localCommitPublished.get
    assert(lcp.localOutput_opt.nonEmpty)
    assert(lcp.incomingHtlcs.values.toSeq == Seq(0))
    assert(lcp.outgoingHtlcs.values.toSeq == Seq(3))
    assert(lcp.htlcDelayedOutputs.size == 2)

    val closing2 = channelDataCodec.decode(hex"001101ecd251e9bcb26a5a0414297b97adc533034f14ce81c0ff05c2fb4b1b3360976a010102100002aaaa00ce2f18a967dc4f25f414e671ba6585f8ef0b8c5fb812c21064f55a2eaa00094510ff19974f78c704a51a7ed74ed76104201c9b8e2a84378a95c72fdea7bef380000001000000000000044c000000001dcd65000000000000002710000000000000000000900064c000028feba10d0eafd0fad8fe20e6d9206e6bd30242826de05c63f459a00aced24b120000186b02000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000001808020a598202bbbb671d15145722fb8c28d732cddb249bcc6652ed2b297ff1f77a18371b1e6300000000000003e8000000003b9aca000000000000004e2000000000000003e80090001e03b240d3152962db6c8df5f492961cee063405a6d1d39a15ef4f6b040170be99e7028feba10d0eafd0fad8fe20e6d9206e6bd30242826de05c63f459a00aced24b120319bdffabbf3fd88d9635a556fadd2ce3332bd0a66b5ee51b09501dc8531f7e4e028a2744aed6398199fd4d3dce7b21bd994ce0c58027b17d93f10611ee40550ce10000001408000000000000000000000000001008028a5982000000014a0082ecd251e9bcb26a5a0414297b97adc533034f14ce81c0ff05c2fb4b1b3360976a00000000000000003624f17e10a0ebcc71b4ce5eb541f3e68c73ffddda7294f38f411cd19f24aaed0001fd05b30080ecd251e9bcb26a5a0414297b97adc533034f14ce81c0ff05c2fb4b1b3360976a00000000000000030000000005a995c05900ea5104b145117c6a48520742fb05d48a16a75ba1cc9f67a5eb90284746d400061b100003a52e309818a26a2737bed449f9310171509591cfd7daeb62216f633b1c9cc14faf2adceebf7dbfcf1fd7138442320ff99c54a4f316fc98b4cd7710c1a279bad88058e6795cb09eb288e07630e9829c6f93b851194363e479a1431ca2cabc4f4c092034cce4ac860533e0cd90b8b5a393941c2f7308ec4068b74c2d245cd6c5cce45a3ee16fc36dc2957134feec5403711489ef56382bbd69e98478323e5b1377564859b67effcec1f164fd82d452863ff2cfbe9e0bfd17b9dcdee5064216fe99df14f3676225321816898b971aa3710e4f954876212e7d446479eb0b5105eb57b90c0f0301d45010f627dc11a67d3289dd6463bb389264b52603e5cee4416f3a1f3d7a2a2da60a0620fc25bb8a01613920049e1a287d0e639462838cbcc1938ab4f441c319324eac70fdea294960c0918ea3361e4325e8da5728d025a3538686e0574e9f72c8745978af00a70f9c7b6610a87e47a720fded32f9af507772e0cb08c64b768d77378c18e3743a27d765aaad9a35cf7bac9e9af2ca5d2a1816d1bd8bba944539e9d85be8b254c82e8ce86333cbf82c72bd5a401eb8fd2e71d84c87f80c65798833f8d4faf5cbf3623f520c6e7c9badd474f6d582f5467e40de58204eb719663ef9f694325df4d7f7a5ef797d675eed2480c7c4f3158f4caeb11b9d0f05b3766c00570274c63475fa6c0f2420b2a19cf289a174961184a4a8dd02ba18d26b845d6960e22689bd790aee45f20dde4ec5156c84ac02c2553d9a5a6bf25a93da90b599420a98b30326509d4661bfb46d9e2f43a1fc97388313f7f3ab61615a728f27ffdaf43c7c88542672983902d79a20fcce03240d3795b58a66c720e1b4a0a9cfc04f368edef33d62eea9e1123ca4a5cb99792d655ad8c44604c42cdb3953335db24fe154b20559774b24ace3d35c2bf518640a5d8b4cd30aa0148e868296d6c9ea050e712f57f940f2693099671038042bfcb145712939129004148c59f79af7a9b7b3c8bf6be4d3a1719629195b7398841df73aee12bb332f132d96298003cee791a60b6c10d0708b3ae46944dd990437ccbe9a37827688150e8aeab68218cca38e8d03ce9ed65ae4831797f45d49ff6e56d72159601e9c1b6766e4feda60d957542eb5df5ab1ef7167924f4ef1d7b7661e9a4c9ee7d7df58d7a2cbc431addfc0a41dfc6e2425b7ab98632e366f5ecaf6ffdc1d73ed47269d1f6fc7c335b7c1f3206ece603016357018ccdf267267548adce056fa2a05c877660019742e10872ea2e24c0b9b853a099f38ae8221b314730bf070cd37859418cf26425d499207d75d5022297d634e05bb4ad6462b44e11a8b9dd6516468d7b4686027b50319fe5676abc4cd25477aabc47f7cf0c1b64c26001f8feac705fbc009d1164cd4811179fda86ae2b93999725b484338d15fbc1c93aca46853a69c6089879e1be8ee2716e0bd3f530de7347ef09443e0a2502ec396da67b13171d0ffddd8b21dc1dafe157c933e596cc52fe1ebe663274a0e058b6b7465280bc27e2c0fb1ccecf7289ad584efef96b0804a1af10b182f788f1b324eb769333af99c7a8f28f6f446032cb387a480354f06bca5960df22b59061946740168d1a383cedb7d7cbccbc3fcff91836ed87d4f3366a6ae7a030b49d37d43a5cee8a85d7443720df1bd57c954d57d5ffdfc9bfadae3754d7ef68830bbd2354069364e99c95d0f72b84fe2d880427c7e41435d3aaa47b2ed28eabe332af0221997386aac37021bcbbd78b8cb12b9f439d8154bf17b5f0252c1fd3c884eb0c723abde233539bf94bef906bc260bc3496cd62c29e82bdd831ea9222af8f8fa28e295409bc4bc7532946e02e6b046857ab8a7d97714fcaf64b1e45ddd1127b678499005bedc4a00a4134b11b2c934e7ecbb164afd9a5964a2def87ffa03bdfe0001a14701070000000000000000000000000000000400000000000000010002fffd05b1ecd251e9bcb26a5a0414297b97adc533034f14ce81c0ff05c2fb4b1b3360976a000000000000000000000000068e778014d153e87b1c076e0ec079c69f724ad514e470cc9497403c0e7581d20de53df400061ab00002fcf3a4b860fa3e927bf185dc7ddac5b2b5af8bf44dc60da6a8edd8609304afb974f4436aad796a089ec4d7ec2fdfc28070fe0e4b1e5bfb4ce4cf44b6b32a76edb353eacbc7d1ccf503fbd11d3ee7110bc436432bef8e16d91c118bb8b1e84d2f5cd259fdd4dd9668e71cbfdee1cb27c6e528e66e70b69b9df9dd2d2aa05ce8f7c744aeb5bddd0ea456d1d893f7935174f3d70a19f363cadac78bc686b14e22b59bccc90be9c17464c5faab973a806e61aba13c54466c3ea3df26795b88df13846c6043a8e0cbdf2a9ff3484c951d6ccd7fc04f0826d60ebbd2a096b7ba55c114eb5d038d4a501376265d1d6fd056ea70c6d7951369c4aa81edea8aeba8afb9b9fe14320cb0c3f5cec8a2cc508b9480ebe630adc8dd3af0b21eba4d0c39f7c303b983f2af0c8a0ce17a54709544923c557c889712e0913f7fd8c1ce1912d98907e4b14b27019e167f25fda91f0f96916e15524cab8dfaddd58254f02993c1ae71a463297772d3887053cd228826a23f0faa27d51fb71e296f06107071bd54f9c4ee208dc39fd824f059015186fd83cec58c988a5d920fbae51840db4dd643b0e11461832c20a5d1a86813c84ad89ca72d76ebccd739244312493daab09bcbbefa5eacb0cbce18ad5d21f2562c82c59e5de947dfeff0afcb8e5ada37eff448195e911af1b8ccb3bbc0f0d184108d72cbeecbae2f01e5151eb3a0e19022abafd13a8de290f2c59afaa991a8bc05afe046d19e2802fc73646eb7a1e359d49288dba9cde637829e2c5b2022fdaec0882fc0117467ef4089a708ae2797f69e989b1d00e5dd83473b8657bf2ba18411fff74c6a81b7b14771c2baeeb34608526fb194ce4526fc207d99e93b25d0f6c777b631f402f31369f0aa7ecdda31020c0b74dd5e5d67f01d44af2bde4e7ffdf32f48cc731adf08fe3d5a8eb6dd9ed2115b917474bdfdbce2db780a6f62115dc54948fc32ddc3e7552614eb8d7d7b1106c3fd239054b03beaf32e3426d2ef7e2815e7527b4ba158c02dffe84a543bf15f6be831d01b7e37907eb13d7e69dd7cb032f1e78ec4d55328ef188a8db606bd608adfa1ea93a7fc690a3ea435d9c7eb59047fd2dc541bfb4ab7969cb994e03a8a283ca1a4a1331489a5c0793aaa7346912ea09d23baca1f8a381f5040e16af01c901ac2f2973e711c8e3eb889b4a007bc5a2e70dd61e70e48034a3713e99a759a6b04233c80a280bfb794b83f57bbea26d4b00dac61a10f2b6674e494004823dacd2872a2fe349e015c9f8bdd042f686fc73590870c0cf0ce6172101baeb852a213c07c5ffb6a70f833a4c65e47a65e9ff61cadf660628f49970347cbad79d2b5b4f8923330287630d00e095d730d2540421170f4f8560355115aa7c8301a6495e22c9a2c38de611ac0854db03f2bf8e7ccc3a973c6513862ee2b98fdcf7acbc14ce2bcb8442588cca624aeed1e4297d6b272450735e6b6a87b273877a38e17b4ee635d0f6254136db74130ccf5dc287e0b24eeef94deafb81fd5803ff1de1db3c52f65b242e26ce733efe010e58ac2864542c1ffcc5b49959f8b207f237b8a0b86e95393eadf9c778182a1be4680a9eaaae7760fa269ea3afa04595f4c970fe854beacc6e5b4d95de3b9915b24de58271f455a7792bd3a1b794c6eed63b9bad7d2ec1ffdb413fc8aafaf8c11914310e94d5ba3b9673ed77301cf37e65463293cc612fcacd98c15174f06e45e57f135e7573b2ab7a1feee7821f2f0aee3aa35338653c7f17b85f5acf321f48b0e576109b4158efaa1d9fe610fe569e7a639a0ebe0b38facd8e252549d09140b99e175ffc8aba082ddb66c759698d66367c1dc7cc45f03384a3a55eb5e9cc8e681c7824a1de443cd0069ae890a53979b08b4bc07235e7f2aec993f6e02d4e5c645e7e646c2cb1b8322f490a0fe0001a147010700fd05b1ecd251e9bcb26a5a0414297b97adc533034f14ce81c0ff05c2fb4b1b3360976a00000000000000030000000005a995c05900ea5104b145117c6a48520742fb05d48a16a75ba1cc9f67a5eb90284746d400061b100003a52e309818a26a2737bed449f9310171509591cfd7daeb62216f633b1c9cc14faf2adceebf7dbfcf1fd7138442320ff99c54a4f316fc98b4cd7710c1a279bad88058e6795cb09eb288e07630e9829c6f93b851194363e479a1431ca2cabc4f4c092034cce4ac860533e0cd90b8b5a393941c2f7308ec4068b74c2d245cd6c5cce45a3ee16fc36dc2957134feec5403711489ef56382bbd69e98478323e5b1377564859b67effcec1f164fd82d452863ff2cfbe9e0bfd17b9dcdee5064216fe99df14f3676225321816898b971aa3710e4f954876212e7d446479eb0b5105eb57b90c0f0301d45010f627dc11a67d3289dd6463bb389264b52603e5cee4416f3a1f3d7a2a2da60a0620fc25bb8a01613920049e1a287d0e639462838cbcc1938ab4f441c319324eac70fdea294960c0918ea3361e4325e8da5728d025a3538686e0574e9f72c8745978af00a70f9c7b6610a87e47a720fded32f9af507772e0cb08c64b768d77378c18e3743a27d765aaad9a35cf7bac9e9af2ca5d2a1816d1bd8bba944539e9d85be8b254c82e8ce86333cbf82c72bd5a401eb8fd2e71d84c87f80c65798833f8d4faf5cbf3623f520c6e7c9badd474f6d582f5467e40de58204eb719663ef9f694325df4d7f7a5ef797d675eed2480c7c4f3158f4caeb11b9d0f05b3766c00570274c63475fa6c0f2420b2a19cf289a174961184a4a8dd02ba18d26b845d6960e22689bd790aee45f20dde4ec5156c84ac02c2553d9a5a6bf25a93da90b599420a98b30326509d4661bfb46d9e2f43a1fc97388313f7f3ab61615a728f27ffdaf43c7c88542672983902d79a20fcce03240d3795b58a66c720e1b4a0a9cfc04f368edef33d62eea9e1123ca4a5cb99792d655ad8c44604c42cdb3953335db24fe154b20559774b24ace3d35c2bf518640a5d8b4cd30aa0148e868296d6c9ea050e712f57f940f2693099671038042bfcb145712939129004148c59f79af7a9b7b3c8bf6be4d3a1719629195b7398841df73aee12bb332f132d96298003cee791a60b6c10d0708b3ae46944dd990437ccbe9a37827688150e8aeab68218cca38e8d03ce9ed65ae4831797f45d49ff6e56d72159601e9c1b6766e4feda60d957542eb5df5ab1ef7167924f4ef1d7b7661e9a4c9ee7d7df58d7a2cbc431addfc0a41dfc6e2425b7ab98632e366f5ecaf6ffdc1d73ed47269d1f6fc7c335b7c1f3206ece603016357018ccdf267267548adce056fa2a05c877660019742e10872ea2e24c0b9b853a099f38ae8221b314730bf070cd37859418cf26425d499207d75d5022297d634e05bb4ad6462b44e11a8b9dd6516468d7b4686027b50319fe5676abc4cd25477aabc47f7cf0c1b64c26001f8feac705fbc009d1164cd4811179fda86ae2b93999725b484338d15fbc1c93aca46853a69c6089879e1be8ee2716e0bd3f530de7347ef09443e0a2502ec396da67b13171d0ffddd8b21dc1dafe157c933e596cc52fe1ebe663274a0e058b6b7465280bc27e2c0fb1ccecf7289ad584efef96b0804a1af10b182f788f1b324eb769333af99c7a8f28f6f446032cb387a480354f06bca5960df22b59061946740168d1a383cedb7d7cbccbc3fcff91836ed87d4f3366a6ae7a030b49d37d43a5cee8a85d7443720df1bd57c954d57d5ffdfc9bfadae3754d7ef68830bbd2354069364e99c95d0f72b84fe2d880427c7e41435d3aaa47b2ed28eabe332af0221997386aac37021bcbbd78b8cb12b9f439d8154bf17b5f0252c1fd3c884eb0c723abde233539bf94bef906bc260bc3496cd62c29e82bdd831ea9222af8f8fa28e295409bc4bc7532946e02e6b046857ab8a7d97714fcaf64b1e45ddd1127b678499005bedc4a00a4134b11b2c934e7ecbb164afd9a5964a2def87ffa03bdfe0001a1470107000100000000000000000000000002d87e81abde4e3ec8820378dfed9b23de246ea99520120d1f44fb5f08c6e25cc20a5e020000000101010101010101010101010101010101010101010101010101010101010101012a00000000ffffffff0140420f00000000002200204187b4de4877993f8eaefba883cd1b5ced129cbf65b32369ce94278ba373bea000000000061a8000002a000000000200000000000000070001ff000000000000000000002710000000000bebc200000000002920908024ecd251e9bcb26a5a0414297b97adc533034f14ce81c0ff05c2fb4b1b3360976a000000002b40420f00000000002200204187b4de4877993f8eaefba883cd1b5ced129cbf65b32369ce94278ba373bea047522102d87e81abde4e3ec8820378dfed9b23de246ea99520120d1f44fb5f08c6e25cc2210321b0573b4983b21fae946f9d5813b49ba551ae937e04453d853ed2b17ebc0e1f52aea80200000001ecd251e9bcb26a5a0414297b97adc533034f14ce81c0ff05c2fb4b1b3360976a000000000036a2ab8003b0ad0100000000002200201991d1de5f3d395a979d0fa4ff88d3e7226f66e6961c6641d75e6be850a74f9840ea020000000000220020c9abd3d347f1d3f9b06cf38adb0e466d30ac14531d66ee4a58468da201b1744250870a0000000000160014761879f7b274ce995f87150a02e75cc0c037e8e3ab6789203cc33db437cdc8a155697a5623fc8b95dcdbbe39ae6b8208a87d3d9401b9cd583fd069d733aae4c3176064e906688968d6db67235901f66e057370398bbf03f600011124b25163410a7498125e4b9b7f8b7d9de5058aa17c33b434d20f02bcafb73351ee000000002bb0ad0100000000002200201991d1de5f3d395a979d0fa4ff88d3e7226f66e6961c6641d75e6be850a74f988b76a9149ffa573e4ee636e634f219fadf8c6b12d80486568763ac672103aee5bce7fc5e18ba065474648005ea3e9f38cf970384dc5f8d2e4c03cb516f957c8201208763a9145d87298de5ed29a001ff24c4abb3d3d091682eed88527c210227923219b11f31e65eda4b48e5e1332c64b32855908f3174b3e1988046e40a8152ae677503b01a06b175ac68685e0200000001b25163410a7498125e4b9b7f8b7d9de5058aa17c33b434d20f02bcafb73351ee000000000000000000013a92010000000000220020c9abd3d347f1d3f9b06cf38adb0e466d30ac14531d66ee4a58468da201b174420000000014d153e87b1c076e0ec079c69f724ad514e470cc9497403c0e7581d20de53df4000000000000000000061ab0bb4dd41c527120c21c93f2fb47d1c2ff8cd3a1c02d7ba84ee75c722ecdab68736c29f05f36d2a459b88465138f324a4f7e5d6d1b68cdb0424b0d5a1211c5ccfd00000000000000070001000000000000000000000027100000000029209080000000000bebc2005d845aa65434b27605eb87c7f6140341ea62830069e5f920fadee8fbd04cd9a3039e9c9873bbd72749e8e7c6e20113eb165f1311c54aafcfbcc4d17406782919e0ffe2ecd251e9bcb26a5a0414297b97adc533034f14ce81c0ff05c2fb4b1b3360976a464775ee59a1cf732abfcfdf379802dcd35ca156552bd4bcec993fd4f973c8923036941dad06a84c462934b49129149adc5ec9966cbc15e9b1d45dcca22dc285000282a40d98f56378d7b5317259cebc9ee7bf988978cc559c364abe11b02d5bc23279e0ec9e9d150f45277c8eb15f7c06e2cb78b61c693a6930ac833fcac743d2f57484d9079265129578deab29ec880838c33533a6b6ccf8e2809589ec102cbfb054f911ce68034c4a85af246805d2a486bb5651046658b9f4d8b374202fb3d12b00000000000000080002000000000000000000ff00000000000000030000271000000000292090800000000006422c409e3a670043626160e4168680f6c9ed54f3e4a36a6431ae8b033e952733d8df4203f6df89806aac70525348c9992304f87c6696af5b79a873babebc98647b5c8dc400000000000000000000070003003e0000fffffffffffc008303fe69a5668f4ab7ab30ba3351c2cee3ea694ff845fd1597d2021bea85133e5400fc0003ffffffffffe80107be162987941764fd52d41bc68e8bc2608490344f5262a6ba73a1cef4cf96635802000007ffffffffffc80101a7d494b974c327cd2c2a51582cf428c0085ea2c28e84256db34e90e1903b8f5c0003ffffffffffe40001000000000000000300038aa4d004f59a49509c75b39e5724f9fe0000061a80160014761879f7b274ce995f87150a02e75cc0c037e8e30000000000ffa80200000001ecd251e9bcb26a5a0414297b97adc533034f14ce81c0ff05c2fb4b1b3360976a000000000036a2ab8003b0ad010000000000220020a913e317167390473b4df76d339637dd116746e0f8a3014a15e028b18b5edf8d40ea020000000000160014761879f7b274ce995f87150a02e75cc0c037e8e350870a000000000022002062c4769ddc7b9e379dade5ad80b8100d540b0df91868e454fe1a5d4195351a1dab67892000000124a3d94cd0fbe8defa20f9e569008362ea410314f6c787eb0576b23454a65a845d00000000ff2324a3d94cd0fbe8defa20f9e569008362ea410314f6c787eb0576b23454a65a845d000000002bb0ad010000000000220020a913e317167390473b4df76d339637dd116746e0f8a3014a15e028b18b5edf8d8576a914acc2a5ecf25b533fee601c4e694c06c53d32e0268763ac6721030afb6f8fba31f5a4394cd3a1145268354dc9464f3253d311333cfc7591c4cb697c820120876475527c21032dd2755000aba32a5442d6d6bf0488d997a1988c534092ac6bf244c7c864ffbf52ae67a9145d87298de5ed29a001ff24c4abb3d3d091682eed88ac6868fd014402000000000101a3d94cd0fbe8defa20f9e569008362ea410314f6c787eb0576b23454a65a845d000000000000000000016297010000000000160014761879f7b274ce995f87150a02e75cc0c037e8e3034730440220337e642e9d285ba15a93d070e8a7d5e598de5f90799cf64ec1b4aa5906ccfb9002204756e51351e1afadb73af8072b5b9ae7c9f3a777132d1faeea8240b5fdd6810101203624f17e10a0ebcc71b4ce5eb541f3e68c73ffddda7294f38f411cd19f24aaed8576a914acc2a5ecf25b533fee601c4e694c06c53d32e0268763ac6721030afb6f8fba31f5a4394cd3a1145268354dc9464f3253d311333cfc7591c4cb697c820120876475527c21032dd2755000aba32a5442d6d6bf0488d997a1988c534092ac6bf244c7c864ffbf52ae67a9145d87298de5ed29a001ff24c4abb3d3d091682eed88ac68680000000014d153e87b1c076e0ec079c69f724ad514e470cc9497403c0e7581d20de53df4000000000000000000061ab00000000000000000".bits).require.value.asInstanceOf[DATA_CLOSING]
    assert(closing2.remoteCommitPublished.nonEmpty)
    val rcp = closing2.remoteCommitPublished.get
    assert(rcp.outgoingHtlcs.isEmpty)
    assert(rcp.incomingHtlcs.values.toSeq == Seq(0))

    val closing3 = channelDataCodec.decode(hex"001101b848165af91647fd18dc3da2e49972e4c6a76d485b1eafdf4e1ddd393107589b010102100002aaaa00ce2f18a967dc4f25f414e671ba6585f8ef0b8c5fb812c21064f55a2eaa000947634c4314cc9859632bb0db04f4aa6194fa4c7b5a24f94ed30197557e232fcb80000001000000000000044c000000001dcd65000000000000002710000000000000000000900064c000028feba10d0eafd0fad8fe20e6d9206e6bd30242826de05c63f459a00aced24b120000186b02000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000001808020a598202bbbb671d15145722fb8c28d732cddb249bcc6652ed2b297ff1f77a18371b1e6300000000000003e8000000003b9aca000000000000004e2000000000000003e80090001e0351cda699fd1471468b07360b09aa63d9f0b7066030c053ffc17c708ebc5fa5a7028feba10d0eafd0fad8fe20e6d9206e6bd30242826de05c63f459a00aced24b120379bf217b5c2ea4602f186fb3abff38198ce69a2c48215a0f53bac42da7b8eb3e02595899924a395a4af0987f056456ee1a4133c0183227e72af934d1a2f424a18b0000001408000000000000000000000000001008028a5982000000014a0082b848165af91647fd18dc3da2e49972e4c6a76d485b1eafdf4e1ddd393107589b0000000000000000e559091e6b69e409919a0956d1fe2e786262446548a920b203fa3a7ce51146ae0001fd05b30080b848165af91647fd18dc3da2e49972e4c6a76d485b1eafdf4e1ddd393107589b00000000000000030000000005a995c0028fd04843d9cea2a6053932960308a3400dd79873bbdd9b7bf5325ad5eaa2e100061aa00003883bc264072d01155f2ef9b27242fe84cfd26949e8832d38839d5a3924647c045d901a42ff93b586fbb75dc27ea987d2419f08db8fa03bbee2f76ecab9e06dd09374be37e8be3884bbcbe1eb61b2f9087bce50586ebe8401a825f6547e0255b89200b9ec3944798ab66600bd964e21ecb9e7294b10365fe9bff532244e6dc2ef42a90b84bf2a4a69c6160c5ae3b540a49e32b85c059f9d5441f99789fa381d61ce56e276e920ba7e84cff9c15555378d2ee0d4cc1b473f666bfa5ca27289628f04a2470b26934c4ed3b637abff89afcf669b90872bb4dac908d9662f9cf4c6ae0860cdb3d3c98aa6aeb1a6bb078307a8c5f51162165f12ae47540732d04f4c7736bec7644b6f1d542dcd66db6c51a9a3e3b046dfccff15db283df3f7784f06f49eb79bb2b9bd27e87b62ece40f2522e2119799cad60d3491dc470fa8389c4a0ba203cb3cf703f1fc8520d7d24f2964d531e506c98b436303b98615f6fd111cd3eb37276935eb900cb0104a741f4b44de3371eb578ac59314790362426c76838358d352940302d03d9aecc50918dd81748558cff571f5db3514a955a28bb570daa047eb2868d787b84b5707979aba1083e0d22d06890a6fa79f6b0b56f86da80ae79cb9c45641aaca16d57cedca81841d780b8d684f0f9347edccee172a8710248920981195fec9378111293193d6fccb94f438a59ec272130d644c9de7f1d5c1e59bf9a41782ac5a2947f7eba0f6fdf9013a7254c6bbc0c325d50cc69fefbcd83dcd009f7bc26d28aaa622b1f441a9fe95782e5d546fd7746949fe21fa431b4a49e93a9c6e501725977f94f1d8e06e127f15a1ee1beafd6e4a691d1f384315e1060d7c06411f207571128d46dc571d3ffc9afb0c79e2502e5ed02e13c59cd099ad1eeb255af86a64da908d91702ba62739c0dd2df4abe7b0dff71ef24be7c09bf17b280a727a9787e2c8ea4cdb85797cdc2b538ce54791349d61f0b40d134ec667cb3c53d13697af5165ffcc05c7aa847a51986d1beeda7b5d1b644f60217939e35f989fe10ce015253895845ff881472b3f477a78f90998e93e38f2b3c42dfabb08b4d2c1a3f8cd0a969334715ee1b9021a545d9fbddded126b1b93edd068ef25eb7ed73d29249fffeafbcb66badd559422c04120a90001608f712fd55b993bc12f5a540b87dbe1960d388cb8c1e691a7a6990160669532548fe1ed9baa406864d30796db7704030edda83031994a21bcaa2615cf81d5cfdc0dce02bb8771c0d161c17ddf8279407872a7db2374a3a5b159a082a582faa27681215ec63902807a38e48c5fb4973e9fa553b9fb3019971be20e1ea590575d4b595279f791dbdef338a28872e0e06a43ca2d7b74d9474429b2c8069849e626141b87fbbad950f1f86a30f6f24b92fe73f76b4a065ef881ebc168085c5950650b82fb6c92dbda1ba8002b995d35a916e2451e2008385defe1433481dda3d60ab43fbe847233522918906dad9169a45eb8799cf9fb5e9718684a01b30c65b3285c9ff5e5408346822d9a2898e2f717cd3e2f4056af575e4657dbe78b9549b28242034adcec1e3fa1b321997d735ffaf20b1cc9332b7af6f664225c16ae6debeb1d07a17549e5cdabba902f1caf74bb4f2ea6085f219f9edc18eaf2a0193009712d1deaa3ace9a8c05eeeb45aaae5853361d105aa20807647e4404b8e7516971fb0f45cb7fb98b5fc62e39fe13d9243d94cf7fe0abd8be94fed886edc4796d00c37c45a68efc08c19fd172914b5ccce42260d21f99b9ae5f20afc5805b0c65ef52c1678e479ed139076aec1bdca9df21a3e6730a16129b70ebb372a236e1ddac607770bc4033180dedc15bce4afc211644c9c3b5ceca5627b5b3122987eb5397067783eb45624da4d5a189cd340c0d33c7ade63a64a74ee2eec01a5b1fe0001a14701070000000000000000000000000000000400000000000000010002fffd05b1b848165af91647fd18dc3da2e49972e4c6a76d485b1eafdf4e1ddd393107589b000000000000000000000000068e77806fdf03f953dc6040f0ba2f511c65f70e6d6a32d050db40f8400419fe70ffa0e500061ac0000323fa7a843bd1b7b5e80a2a0401eba107865debb4a99a43680fbfb043046dda23faf07641c4f8ac14552d6e43089d8bd46069aed363c51b0d680e3794a950fbcecc9605d139e9790281319bd53785597ac05e9b545542b11a0f70623e088c3e1565632fdb2a7f51194de9c7094595943ba196d30d5ee1b862b9a306bde44e727297f14289826439541a605ed07c98db42a07db9092ca8c0e127e5b19d6c013386a6e4ec84456e543e9bc4be008e81b6b50c8fb7a4264847f65c0dcc121aea93378ad1d7ceefb9ff87ee1152d11f2b5c17222087268230b2e649290bfda463a41230ffc841d0d06ba7ceed825030fbed28b2519bbf72bf082c83e0abbf2748c4ab786dd4c18f83aeec7718d1c13bb7568d3f3b530acca249258dd64d2fb142e31c0b3ffde72233d6a86b1e10c5357289c72b1bd2ff0565c44aa143b877f2e7144a6c8032b512af112533947b66925effde588f21072534dd1d2efdc40efbcb67eaec37e2f26e590b269c1c8e93337b1d36b3516f43f993a0e5aea2dd6c8421458c41cc262ecf7007b5cf8047404f816b0ed63f6a4c737b78ce0bb74fae381edf3ffbf6fbb3de91cf4922d99d48418f2c5e22f9a187e74c81f953b923d9d16af865f380d62ebd31916ce265393fb6881372e34ee04bc566811320f50ca488fdf480b453f4240447704a617cff060bd32940dfd130eb77513839d2b8de0d48a0d58a29088202bca3e3d7ff38ca820a20f157624169abd68a36f692040032b68f67e500c4d84039a53365e857a0cde0218f8caf331483e904848a3379569e61a01d470547e0b376a6ce824b7c84e9d2ae57fc2e96eb794cdb7317c7f5d978c0f3c1c3e74afd89d234b7cecdd571c5a54c756c14e8d37e5bc2a4f6430ecd80288502b6250be70d52b40074dd0e6284184ad0af4e8162f7d356d76afd74120edf0843ba86f03a0b43228d17ba2ac79b7953f178a1af17f3949fc6020bebcc48503f51e81d2e8b0a2c15dfa89316d9a116d4808f3f45dc75c7d145d2f10d6a5490483b7c92084d6747aca140a4ddca23d25c64cbb74e4d77476fbadfb038ac7d228ab711baadde3b2291ec5b20bafb2f2c2679cf482a2d2725edfaa70acb3f91d68cb532d09bb13fac514079cf60c19f4564be9ad350fa5e34d9f35a40ac32e9838886727065da0b8613000efe8db4ebc5744b9d9deef00747340f40dc2d977a47bbd4ce40dacf9aaa6f798f430a1aa9920f0c2488a48717e6276c6d140577d2ad050d163402ecc04d0008cebe1630ee70d389980edc3ef68c251fa5b075ddc613b96875a77c5984e34163b1e15a86068ec0b3f7fd2f482a57ff6b465837661ec3148d860918515b25f19535db6c0770c05738651ab8c453cbb066c45e4abab96381e8fd0609d8564d0345490c1533d58e58e54e27518d10df186ef6f85fbb3ed0fcde0e55ce19ad11b9b87c837e1e7a5f0834a637c02a20f434b6e52aa6cb8ab5d7f495489ffad8848e7041e6464e4b4bbbce34603ab447e0ee9b1e0a30f5fa858559e4a792b546ea29777bf393231c3e40aa207c13297fad343a2c73959417837f2268bb5d849f158e53ac00261742d91e429e5b330ff284f9b61f3952595d45ed187a7a4946f7664a14b44e5a5c21f9fe5f54e283cb4511c9e26fbf30f40f84c2c67a791fe19a02f6abd4253bf087d93b9a6f73e6a330c8f5848b644907d50fac0eded6e389f05038f6db634e9ac155b38621416254588fc15579163fef54779d139c192615618f12c72dbee711fde597bf6af98e5846241fbe9d572b1cf8eb9afb0e3c4b690da5c20d7e4362c1a69979ce9ef9b4ee7630a711879c03e9ed9d7fe35a02910dc5cadba8d4cb60ff1b4aaf51904ca4ec8e2aeef0e14a42ebdf8f24d73b2ce445f57710a15ee2bd2b7494a775ab9c03dbe9fe0001a147010700fd05b1b848165af91647fd18dc3da2e49972e4c6a76d485b1eafdf4e1ddd393107589b00000000000000030000000005a995c0028fd04843d9cea2a6053932960308a3400dd79873bbdd9b7bf5325ad5eaa2e100061aa00003883bc264072d01155f2ef9b27242fe84cfd26949e8832d38839d5a3924647c045d901a42ff93b586fbb75dc27ea987d2419f08db8fa03bbee2f76ecab9e06dd09374be37e8be3884bbcbe1eb61b2f9087bce50586ebe8401a825f6547e0255b89200b9ec3944798ab66600bd964e21ecb9e7294b10365fe9bff532244e6dc2ef42a90b84bf2a4a69c6160c5ae3b540a49e32b85c059f9d5441f99789fa381d61ce56e276e920ba7e84cff9c15555378d2ee0d4cc1b473f666bfa5ca27289628f04a2470b26934c4ed3b637abff89afcf669b90872bb4dac908d9662f9cf4c6ae0860cdb3d3c98aa6aeb1a6bb078307a8c5f51162165f12ae47540732d04f4c7736bec7644b6f1d542dcd66db6c51a9a3e3b046dfccff15db283df3f7784f06f49eb79bb2b9bd27e87b62ece40f2522e2119799cad60d3491dc470fa8389c4a0ba203cb3cf703f1fc8520d7d24f2964d531e506c98b436303b98615f6fd111cd3eb37276935eb900cb0104a741f4b44de3371eb578ac59314790362426c76838358d352940302d03d9aecc50918dd81748558cff571f5db3514a955a28bb570daa047eb2868d787b84b5707979aba1083e0d22d06890a6fa79f6b0b56f86da80ae79cb9c45641aaca16d57cedca81841d780b8d684f0f9347edccee172a8710248920981195fec9378111293193d6fccb94f438a59ec272130d644c9de7f1d5c1e59bf9a41782ac5a2947f7eba0f6fdf9013a7254c6bbc0c325d50cc69fefbcd83dcd009f7bc26d28aaa622b1f441a9fe95782e5d546fd7746949fe21fa431b4a49e93a9c6e501725977f94f1d8e06e127f15a1ee1beafd6e4a691d1f384315e1060d7c06411f207571128d46dc571d3ffc9afb0c79e2502e5ed02e13c59cd099ad1eeb255af86a64da908d91702ba62739c0dd2df4abe7b0dff71ef24be7c09bf17b280a727a9787e2c8ea4cdb85797cdc2b538ce54791349d61f0b40d134ec667cb3c53d13697af5165ffcc05c7aa847a51986d1beeda7b5d1b644f60217939e35f989fe10ce015253895845ff881472b3f477a78f90998e93e38f2b3c42dfabb08b4d2c1a3f8cd0a969334715ee1b9021a545d9fbddded126b1b93edd068ef25eb7ed73d29249fffeafbcb66badd559422c04120a90001608f712fd55b993bc12f5a540b87dbe1960d388cb8c1e691a7a6990160669532548fe1ed9baa406864d30796db7704030edda83031994a21bcaa2615cf81d5cfdc0dce02bb8771c0d161c17ddf8279407872a7db2374a3a5b159a082a582faa27681215ec63902807a38e48c5fb4973e9fa553b9fb3019971be20e1ea590575d4b595279f791dbdef338a28872e0e06a43ca2d7b74d9474429b2c8069849e626141b87fbbad950f1f86a30f6f24b92fe73f76b4a065ef881ebc168085c5950650b82fb6c92dbda1ba8002b995d35a916e2451e2008385defe1433481dda3d60ab43fbe847233522918906dad9169a45eb8799cf9fb5e9718684a01b30c65b3285c9ff5e5408346822d9a2898e2f717cd3e2f4056af575e4657dbe78b9549b28242034adcec1e3fa1b321997d735ffaf20b1cc9332b7af6f664225c16ae6debeb1d07a17549e5cdabba902f1caf74bb4f2ea6085f219f9edc18eaf2a0193009712d1deaa3ace9a8c05eeeb45aaae5853361d105aa20807647e4404b8e7516971fb0f45cb7fb98b5fc62e39fe13d9243d94cf7fe0abd8be94fed886edc4796d00c37c45a68efc08c19fd172914b5ccce42260d21f99b9ae5f20afc5805b0c65ef52c1678e479ed139076aec1bdca9df21a3e6730a16129b70ebb372a236e1ddac607770bc4033180dedc15bce4afc211644c9c3b5ceca5627b5b3122987eb5397067783eb45624da4d5a189cd340c0d33c7ade63a64a74ee2eec01a5b1fe0001a1470107000100000000000000000000000002ff4c609c1b9a4b70b8eaafedf018a1cb24a83918bdd1b87fde8c1905c84f450f0a5e020000000101010101010101010101010101010101010101010101010101010101010101012a00000000ffffffff0140420f0000000000220020224b8c58b3fa0020f800829615232bf183dc41b13603a67cce9b94dd28f8bb2800000000061a8000002a000000000200000000000000070001ff000000000000000000002710000000000bebc200000000002920908024b848165af91647fd18dc3da2e49972e4c6a76d485b1eafdf4e1ddd393107589b000000002b40420f0000000000220020224b8c58b3fa0020f800829615232bf183dc41b13603a67cce9b94dd28f8bb2847522102ff4c609c1b9a4b70b8eaafedf018a1cb24a83918bdd1b87fde8c1905c84f450f2103d68951fa91802e65a951917f58bf547a615875b6553251fe91c940f98b62030552aea80200000001b848165af91647fd18dc3da2e49972e4c6a76d485b1eafdf4e1ddd393107589b000000000036a2ab8003b0ad0100000000002200202faa5d052a90a5e8ef750efc0f43205cb84bfbe8d0a97c8ebbb0fd7d30be8dab40ea020000000000220020822d615f74a3f1da36d31bad7fbc39920436895f15137aaefa767f5e698af36d50870a0000000000160014761879f7b274ce995f87150a02e75cc0c037e8e3ab6789200bb8316328924ab4641b821b72c9fb1cf9b51311c1e3ffafe291756ea403081e130022dc33eb8a765d0909454ba6bf3a5a74ff5467a1d017e63758eabf91b4ad000111243e453164b4e4944314473df2cd44617c007a69fe00819de3a71a3f39605af67d000000002bb0ad0100000000002200202faa5d052a90a5e8ef750efc0f43205cb84bfbe8d0a97c8ebbb0fd7d30be8dab8b76a9144b261689dafc1227a18f487a7929419c6591d9c58763ac672103c50b9d3b40403c354d73948670978f008a3a671c7f6376f6fc7fc3d0e3e1cdaf7c8201208763a91423a2a6f93c2a944f662595191a7829411630ea9788527c21026b7bfaa3fff831c853e94ecce416fb41c23e8fa74b7f408cfddde01b7cdb798852ae677503c01a06b175ac68685e02000000013e453164b4e4944314473df2cd44617c007a69fe00819de3a71a3f39605af67d000000000000000000013a92010000000000220020822d615f74a3f1da36d31bad7fbc39920436895f15137aaefa767f5e698af36d000000006fdf03f953dc6040f0ba2f511c65f70e6d6a32d050db40f8400419fe70ffa0e5000000000000000000061ac071e938061e81f5ecab7725d70a54e3d6036e2fa22e8b2b0c771d32dfe01707b14c942ce6aa6291f0ab8fce4aee5296cf7b9fdcfdca7ec2b7262c219b020004c400000000000000070001000000000000000000000027100000000029209080000000000bebc200ab17ef69024716713fd8a2433cee1a80230b53d11dbe3802782578017df3a85f03e094d392a23dfd51e499b1d88405ca1234d80dca3e1fe4d6a257956c0ab29185ffe2b848165af91647fd18dc3da2e49972e4c6a76d485b1eafdf4e1ddd393107589bdbf802f84854fd0aa4c57db7076190a29ec4a62283568e4d2364216906b6b804457b13b58b8a1106a2dab6496985e64a5829c019d2421d84477e903eab73482800023328bbd3c85d4f30b98fb9ef799f62aaeafca3318fa091fc294fb5ae39ea3a1e1b67960565fa4239d121713074804c5912122ea114e2974a0494592ab33e02c7ad9f3311006e314dc264ce0a8ba93f78d2633bdab60b8cf23208ecaa0aa84f2176291b501e3c0dd50afbc895c01b2a89959773b240ee2962fd8a3694771b369400000000000000080002000000000000000000ff00000000000000030000271000000000292090800000000006422c40ef2c4ef07d34051e1941965e9a420f75735208791058df88162f1e8db90680d0032de5e77d76d525909df1773cbfa29851a9b499bbbc697149060cb390a854fabb00000000000000000000070003003e0000fffffffffffc0081edb904be4493b4bf33014f8c55d7dfc0a0eb6ba1b5c74503731bdccff2fe825c00fc0003ffffffffffe801007810b0c8a83d397e50a0272e9f2457c003f8eb1d2c84b517e49de9df668df10802000007ffffffffffc80107b28bf2a478a86ac898e1edfefa85c5bc5b57100a38a5bc714fab6ddaa57b68f40003ffffffffffe40001000000000000000300031e47851bb56246b4b54c0ca9b7825dce0000061a80160014761879f7b274ce995f87150a02e75cc0c037e8e3000000000000ffd30200000001b848165af91647fd18dc3da2e49972e4c6a76d485b1eafdf4e1ddd393107589b000000000036a2ab80047070010000000000160014761879f7b274ce995f87150a02e75cc0c037e8e31873010000000000220020ebb090e27885e133dcc4c2c50048a5ecad13ef3332340fb4d09933278f0cacfcb0ad0100000000002200202fa94c3bd8b31fb7dd6205f9db6b81066e81c46b8918ef7a02bed3438ab901f650870a0000000000220020bbe62879855ea85e05c2513fd39a76516d448f71269fe74dce02fd0988b3c5ada467892000000224d08006b98d1e2f1688df581079085273750f429a5e9641191e05347df04e2cef02000000ff2324d08006b98d1e2f1688df581079085273750f429a5e9641191e05347df04e2cef020000002bb0ad0100000000002200202fa94c3bd8b31fb7dd6205f9db6b81066e81c46b8918ef7a02bed3438ab901f68576a9140bb693d6b90f314c152b1d2c2ffc088f9542b3ba8763ac672102df93807a4ea0764a5fd9fab2bc573f5a8cee592293615a069c33ba1cc6f329467c820120876475527c2102dbd2b371b31656230bedfcafbea4df02b1f9f2d121c596bd984062b589aa27a452ae67a91423a2a6f93c2a944f662595191a7829411630ea9788ac6868fd014402000000000101d08006b98d1e2f1688df581079085273750f429a5e9641191e05347df04e2cef020000000000000000016297010000000000160014761879f7b274ce995f87150a02e75cc0c037e8e30347304402201b4125bc11ce9f463f659e0058421e9f41e9d4d03e0c3776bc9d5521656382090220276fd4de9215b7f6a329c9af0f254b66181fd9cee38dd1750ae3f9dc29c338e10120e559091e6b69e409919a0956d1fe2e786262446548a920b203fa3a7ce51146ae8576a9140bb693d6b90f314c152b1d2c2ffc088f9542b3ba8763ac672102df93807a4ea0764a5fd9fab2bc573f5a8cee592293615a069c33ba1cc6f329467c820120876475527c2102dbd2b371b31656230bedfcafbea4df02b1f9f2d121c596bd984062b589aa27a452ae67a91423a2a6f93c2a944f662595191a7829411630ea9788ac6868000000006fdf03f953dc6040f0ba2f511c65f70e6d6a32d050db40f8400419fe70ffa0e5000000000000000000061ac024d08006b98d1e2f1688df581079085273750f429a5e9641191e05347df04e2cef01000000ff2224d08006b98d1e2f1688df581079085273750f429a5e9641191e05347df04e2cef010000002b1873010000000000220020ebb090e27885e133dcc4c2c50048a5ecad13ef3332340fb4d09933278f0cacfc8b76a9140bb693d6b90f314c152b1d2c2ffc088f9542b3ba8763ac672102df93807a4ea0764a5fd9fab2bc573f5a8cee592293615a069c33ba1cc6f329467c8201208763a91430fc0d20cea6c07069115f75bd755115dd04808388527c2102dbd2b371b31656230bedfcafbea4df02b1f9f2d121c596bd984062b589aa27a452ae677503a01a06b175ac6868fd012a02000000000101d08006b98d1e2f1688df581079085273750f429a5e9641191e05347df04e2cef01000000000000000001ce5d010000000000160014761879f7b274ce995f87150a02e75cc0c037e8e30347304402200109d51a3db516ba023039618a80c68e2791c0cee74f4af0f52bc0e695fa05200220792a459e57eee58efcf4732323e934332a269d4336a8fa182e488ee54d01ed2401008b76a9140bb693d6b90f314c152b1d2c2ffc088f9542b3ba8763ac672102df93807a4ea0764a5fd9fab2bc573f5a8cee592293615a069c33ba1cc6f329467c8201208763a91430fc0d20cea6c07069115f75bd755115dd04808388527c2102dbd2b371b31656230bedfcafbea4df02b1f9f2d121c596bd984062b589aa27a452ae677503a01a06b175ac6868a01a0600000000000000000300061aa000000000000000".bits).require.value.asInstanceOf[DATA_CLOSING]
    assert(closing3.nextRemoteCommitPublished.nonEmpty)
    val nrcp = closing3.nextRemoteCommitPublished.get
    assert(nrcp.incomingHtlcs.values.toSeq == Seq(0))
    assert(nrcp.outgoingHtlcs.values.toSeq == Seq(3))
  }

}
